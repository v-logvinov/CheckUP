# Пакет генерации кастомных ошибок

Этот пакет предназначен для автоматической генерации кастомных ошибок и их ассоциированных HTTP-статусов. Пакет берет на вход файл `errors.json` и создает Go-код, который позволяет легко работать с ошибками, обрабатывать их, сериализовать и возвращать в формате JSON для веб-ответов.

## Основные возможности

- **Генерация констант для кодов ошибок.**
- **Автоматическое присвоение уникальных кодов для ошибок.**
- **Привязка кастомных сообщений ошибок к их кодам.**
- **Ассоциация ошибок с HTTP-статусами.**
- **Легкая интеграция с веб-фреймворками** (например, Echo).

## Требования

- Входные данные должны быть в формате JSON, содержащем описание ошибок и их сопутствующих HTTP-статусов.

# Пример файла `errors.json`

```json
[
    {
        "error": "invalid account role",
        "http_status": 403
    },
    {
        "error": "not found",
        "http_status": 404
    },
]
```

### Генерация ошибок

Скрипт генерирует файл ecode.go, который содержит:

    - Константы для каждого кода ошибки.
    - Переменные для всех ошибок, которые можно использовать в коде.
    - Хэш-таблицу для сопоставления кода ошибки с HTTP-статусом и текстом ошибки.

### Пример использования

    Вызовите метод GetHTTPErrData, чтобы получить HTTP-статус, код ошибки и сообщение для возврата клиенту:

    ```go
    httpStatus, errCode, errMsg := GetHTTPErrData(err)
    ```
    Это удобно для обработки ошибок в контроллерах:
```go
func (h *Handler) GetSomething(c echo.Context) error {
    err := someLogic()
    if err != nil {
        status, code, message := GetHTTPErrData(err)
        return c.JSON(status, map[string]interface{}{
            "code":    code,
            "message": message,
        })
    }
    return c.JSON(http.StatusOK, data)
}
```

### Настройки

    - Путь к файлу errors.json можно передать как аргумент командной строки или использовать директорию по умолчанию.
    `configs/errors.json`
    - Код автоматически проверяет уникальность кодов ошибок и корректность их названий.

### Запуск генерации

Чтобы сгенерировать файл с ошибками, выполните команду:

```bash
go run main.go /path/to/configs
```
Если путь не указан, будет использована директория по умолчанию.

### Автоматизация

Для удобства генерации ошибок можно использовать Makefile:

```bash
make errors
```
